<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.6.1"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Android Camera2 Fundamentals" /><meta name="author" content="Jinbo Yang" /><meta property="og:locale" content="en_US" /><meta name="description" content="Android Camera2使用过程中的总结:" /><meta property="og:description" content="Android Camera2使用过程中的总结:" /><link rel="canonical" href="https://jinboyang94.github.io/posts/Android-Camera2-Basics/" /><meta property="og:url" content="https://jinboyang94.github.io/posts/Android-Camera2-Basics/" /><meta property="og:site_name" content="Jinbo" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-15T13:29:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Android Camera2 Fundamentals" /><meta name="twitter:site" content="@Yang_Jinbo" /><meta name="twitter:creator" content="@Jinbo Yang" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"Android Camera2使用过程中的总结:","mainEntityOfPage":{"@type":"WebPage","@id":"https://jinboyang94.github.io/posts/Android-Camera2-Basics/"},"@type":"BlogPosting","author":{"@type":"Person","name":"Jinbo Yang"},"url":"https://jinboyang94.github.io/posts/Android-Camera2-Basics/","headline":"Android Camera2 Fundamentals","dateModified":"2021-04-15T13:29:00+08:00","datePublished":"2021-04-15T13:29:00+08:00","@context":"https://schema.org"}</script><title>Android Camera2 Fundamentals | Jinbo</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <script defer src="/app.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Jinbo</a></div><div class="site-subtitle font-italic"><b><font color=#1d9690>Welcome to my Kingdom.</font></b></div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span data-toggle="tooltip" data-placement="right" title="HOME">HOME</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span data-toggle="tooltip" data-placement="auto" title="CATEGORIES">CATEGORIES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span data-toggle="tooltip" data-placement="auto" title="TAGS">TAGS</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span data-toggle="tooltip" data-placement="auto" title="ARCHIVES">ARCHIVES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span data-toggle="tooltip" data-placement="auto" title="ABOUT">ABOUT</span> </a></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper" data-toggle="tooltip" title="Day/Night Mode"> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/JinboYang94" aria-label="Github" data-toggle="tooltip" title="Github"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/Yang_Jinbo" aria-label="Twitter" data-toggle="tooltip" title="Twitter"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['scottyjb94','gmail.com'].join('@')" aria-label="Email" data-toggle="tooltip" title="Email"> <i class="fas fa-envelope"></i> </a> <a href="https://linkedin.com/in/jinbo-yang" aria-label="Linkedin" data-toggle="tooltip" title="Linkedin"> <i class="fab fa-linkedin"></i> </a></div><script> $(document).ready(function(){ $('[data-toggle="tooltip"]').tooltip(); }); </script></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Android Camera2 Fundamentals</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Android Camera2 Fundamentals</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Apr 15, 2021, 1:29 PM +0800" > Apr 15 <i class="unloaded">2021-04-15T13:29:00+08:00</i> </span> by <span class="author"> Jinbo Yang </span></div><div> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Apr 15, 2021, 1:29 PM +0800" > Apr 15 <i class="unloaded">2021-04-15T13:29:00+08:00</i> </span></div></div><div class="post-content"><h2 id="android-camera2使用过程中的总结"><strong>Android Camera2使用过程中的总结:</strong></h2><h3 id="a-camera2-常用类"><strong>A. Camera2 常用类:</strong></h3><h4 id="1-cameramanager">1. CameraManager</h4><blockquote><p><strong>CameraManager是Camera2中新加入的类，用来管理摄像头相关的所有信息/内容，通过getSystemService(Context.CAMERA_SERVICE)实例化。</strong><br /> <strong>Docs: A system service manager for detecting, characterizing, and connecting to CameraDevices.</strong></p></blockquote><ul><li> <font color="Blue">CameraCharacteristics getCameraCharacteristics(String cameraId)</font><blockquote> <font color="Tan">得到camera的参数和属性</font><p>Source code: Query the capabilities of a camera device. These capabilities are immutable for a given camera.</p></blockquote><li> <font color="Blue">String[] getCameraIdList()</font><blockquote> <font color="Tan">得到当前连接的camera id</font><p>Source code: Return the list of currently connected camera devices by identifier, including cameras that may be in use by other camera API clients.</p></blockquote><li> <font color="Blue">void openCamera(String cameraId, CameraDevice.StateCallback callback, Handler handler)</font><blockquote> <font color="Tan">打开camera</font><p>Source code: Open a connection to a camera with the given ID.<br /> More: Once the camera is successfully opened, {@link CameraDevice.StateCallback#onOpened} will be invoked with the newly opened {@link CameraDevice}. The camera device can then be set up for operation by calling {@link CameraDevice#createCaptureSession} and {@link CameraDevice#createCaptureRequest}</p></blockquote><li> <font color="Blue">void openCamera(String cameraId, Executor executor, CameraDevice.StateCallback callback)</font><blockquote> <font color="Tan">打开camera</font><p>Source code: Open a connection to a camera with the given ID.<br /> More: The behavior of this method matches that of {@link #openCamera(String, StateCallback, Handler)}, except that it uses {@link java.util.concurrent.Executor} as an argument instead of {@link android.os.Handler}.</p></blockquote><li> <font color="Blue">void setTorchMode(String cameraId, boolean enable)</font><blockquote> <font color="Tan">打开或关闭摄像头的闪光灯功能</font><p>Source code: Set the flash unit’s torch mode of the camera of the given ID without opening the camera device.</p></blockquote></ul><h4 id="2-cameradevice">2. CameraDevice</h4><blockquote><p><strong>CameraDevice是代表连接到Android设备的某个camera，一般通过CameraDevice.StateCallback中的onOpen(CameraDevice camera)来初始化</strong><br /> <strong>Docs: The CameraDevice class is a representation of a single camera connected to an Android device, allowing for fine-grain control of image capture and post-processing at high frame rates.</strong></p></blockquote><ul><li> <font color="Blue">abstract void close()</font><blockquote> <font color="Tan">关闭camera</font><p><strong>Source code:</strong> Close the connection to this camera device as quickly as possible.</p></blockquote><li> <font color="Blue">CaptureRequest.Builder createCaptureRequest(int templateType, Set&lt;String&gt; physicalCameraIdSet)</font><blockquote> <font color="Tan">创建一个CaptureRequest.Builder，用于选择一种capture的模式</font><p><strong>Source code:</strong> Create a CaptureRequest.Builder for new capture requests, initialized with template for a target use case.</p></blockquote><li> <font color="Blue">abstract CaptureRequest.Builder createCaptureRequest(int templateType)</font><blockquote> <font color="Tan">同上，通常更常用一些</font><p><strong>Source code:</strong> Same as above.<br /> <strong>常用参数：</strong></p><ul><li>TEMPLATE_PREVIEW 预览请求<li>TEMPLATE_RECORD 录像请求<li>TEMPLATE_STILL_CAPTURE 静态图像捕获请求<li>TEMPLATE_VIDEO_SNAPSHOT 视频截图请求<li>TEMPLATE_MANUAL 禁止所有自动控制(AF/AE等)的一种basic template，很少用<li>TEMPLATE_ZERO_SHUTTER_LAG 无快门延迟的静态图像捕获请求</ul></blockquote><li> <font color="Blue">void createCaptureSession(SessionConfiguration config)</font><blockquote> <font color="Tan">用SessionConfiguration创建一个CameraCaptureSession</font><p><strong>Source code:</strong> Create a new CameraCaptureSession using a SessionConfiguration helper object that aggregates all supported parameters.</p></blockquote><li> <font color="Blue">abstract void createCaptureSession(List&lt;Surface&gt; outputs, CameraCaptureSession.StateCallback callback, Handler handler)</font><blockquote> <font color="Tan">通过配置output surfaces, StateCallback和Handler来创建，但在API level 30+ deprecated, 改用上面的</font><p><strong>Source code:</strong> Create a new camera capture session by providing the target output set of Surfaces to the camera device.</p></blockquote><li> <font color="Blue">boolean isSessionConfigurationSupported(SessionConfiguration sessionConfig)</font><blockquote> <font color="Tan">检查此camera是否支持某个特定的SessionConfiguration</font><p><strong>Source code:</strong> Checks whether a particular SessionConfiguration is supported by the camera device.</p></blockquote><li> <font color="Blue">abstract String getId()</font><blockquote> <font color="Tan">得到此camera的id，即使关闭/fatal error后都可以使用</font><p><strong>Source code:</strong> Get the ID of this camera device. This method can be called even if the device has been closed or has encountered a serious error.</p></blockquote></ul><h4 id="3-cameracapturesession">3. CameraCaptureSession</h4><blockquote><p><strong>CameraCaptureSession是一个配置好的拍照会话，主要用于拍照，也用于对同一个session拍到的照片做再处理，由CameraDevice.createCaptureSession(…)的SessionConfiguration定义/CameraCaptureSession.StateCallback定义</strong><br /> <strong>Doc: A configured capture session for a CameraDevice, used for capturing images from the camera or reprocessing images captured from the camera in the same session previously.</strong></p></blockquote><ul><li> <font color="Blue">abstract int capture(CaptureRequest request, CameraCaptureSession.CaptureCallback listener, Handler handler)</font><blockquote> <font color="Tan">提交拍照请求</font><p><strong>Source code:</strong> Submit a request for an image to be captured by the camera device.<br /> <strong>More:</strong> Requests submitted through this method have higher priority than those submitted through {@link #setRepeatingRequest} or {@link #setRepeatingBurst}, and will be processed as soon as the current repeat/repeatBurst processing completes.</p></blockquote><li> <font color="Blue">int captureBurst(List&lt;CaptureRequest&gt; requests, CameraCaptureSession.CaptureCallback listener, Handler handler)</font><blockquote> <font color="Tan">提交多个拍照请求，即连拍</font><p><strong>Source code:</strong> Submit a list of requests to be captured in sequence as a burst. The burst will be captured in the minimum amount of time possible, and will not be interleaved with requests submitted by other capture or repeat calls.</p></blockquote><li> <font color="Blue">abstract void close()</font><blockquote> <font color="Tan">异步关闭capture session</font><p><strong>Source code:</strong> Close this capture session asynchronously. Closing a session frees up the target output Surfaces of the session for reuse with either a new session, or to other APIs that can draw to Surfaces.</p></blockquote><li> <font color="Blue">abstract int setRepeatingBurst(List&lt;CaptureRequest&gt; requests, CameraCaptureSession.CaptureCallback listener, Handler handler)</font><blockquote> <font color="Tan">请求无限重复照片连拍操作</font><p><strong>Source code:</strong> Request endlessly repeating capture of a sequence of images by this capture session.<br /> <strong>More:</strong> If a request is submitted through {@link #capture} or {@link #captureBurst}, the current repetition of the request list will be completed before the higher-priority request is handled. This guarantees that the application always receives a complete repeat burst captured in minimal time, instead of bursts interleaved with higher-priority captures, or incomplete captures.</p></blockquote><li> <font color="Blue">abstract int setRepeatingRequest(CaptureRequest request, CameraCaptureSession.CaptureCallback listener, Handler handler)</font><blockquote> <font color="Tan">请求无限重复拍照</font><p><strong>Source code:</strong> Request endlessly repeating capture of images by this capture session.<br /> <strong>More:</strong> Repeat requests have lower priority than those submitted through {@link #capture} or {@link #captureBurst}, so if {@link #capture} is called when a repeating request is active, the capture request will be processed before any further repeating requests are processed.</p></blockquote><li> <font color="Blue">abstract void stopRepeating()</font><blockquote> <font color="Tan">取消正在进行的重复拍照请求，正在进行的拍照或者连拍操作仍会完成</font><p><strong>Source code:</strong> Cancel any ongoing repeating capture set by either setRepeatingRequest or setRepeatingBurst(List, CameraCaptureSession.CaptureCallback, Handler).<br /> <strong>More:</strong> Any currently in-flight captures will still complete, as will any burst that is mid-capture. To ensure that the device has finished processing all of its capture requests and is in ready state, wait for the {@link StateCallback#onReady} callback after calling this method.</p></blockquote></ul><h4 id="4-cameracharacteristics">4. CameraCharacteristics</h4><blockquote><p><strong>CameraCharacteristics是用来描述一个CameraDevice的各种属性，对于给定的camera是immutable的，由CameraManager.getCameraCharacteristics(String cameraId)实例化</strong><br /> <strong>Docs: The properties describing a CameraDevice.</strong></p></blockquote><ul><li> <font color="Blue">T get(CameraCharacteristics.Key key)</font><blockquote> <font color="Tan">获取相机属性中对应字段的值</font><p><strong>Source code:</strong> Get a camera characteristics field value.<br /> <strong>常用参数：</strong></p><ul><li>CONTROL_AE_AVAILABLE_MODES 支持的自动曝光模式列表<li>CONTROL_AE_AVAILABLE_TARGET_FPS_RANGES 支持的帧率范围<li>CONTROL_AE_COMPENSATION_RANGE 支持的曝光补偿范围<li>CONTROL_AF_AVAILABLE_MODES 支持的自动聚焦模式列表<li>CONTROL_AVAILABLE_SCENE_MODES 支持的场景模式列表<li>CONTROL_AWB_AVAILABLE_MODES 支持的自动白平衡模式列表<li>FLASH_INFO_AVAILABLE 是否有闪光灯部件<li>INFO_SUPPORTED_HARDWARE_LEVEL 支持的硬件等级<li>INFO_VERSION 相机设备制造商版本信息<li>LEN_FACING 相机设备相对于屏幕的方向，例如后置摄像头一般是LENS_FACING_FRONT<li>SCALER_STREAM_CONFIGURATION_MAP 支持的可用流配置</ul></blockquote><li> <font color="Blue">List&lt;Key&gt; getKeys()</font><blockquote> <font color="Tan">得到支持的key list</font><p><strong>Source code:</strong> Returns a list of the keys contained in this map.</p></blockquote></ul><h4 id="5-capturerequest">5. CaptureRequest</h4><blockquote><p><strong>CaptureRequest是一个包含了capture设置的拍照请求，由CameraDevice.createCaptureRequest(…)得到CaptureRequest.Builder对象，再用CaptureRequest.Builder.set()配置后，用CaptureRequest.Builder.build()实例化</strong><br /> <strong>Docs:An immutable package of settings and outputs needed to capture a single image from the camera device. Contains the configuration for the capture hardware (sensor, lens, flash), the processing pipeline, the control algorithms, and the output buffers. Also contains the list of target Surfaces to send image data to for this capture.</strong></p></blockquote><ul><li> <font color="Blue">boolean isReprocess()</font><blockquote> <font color="Tan">判断是否是一个再处理请求</font><p><strong>Source code:</strong> Determine if this is a reprocess capture request.<br /> <strong>常用参数：</strong></p><ul><li>COLOR_CORRECTION_MODE 颜色校正(native -&gt; sRGB)<li>CONTROL_AF_MODE 自动聚焦模式<li>CONTROL_AWB_MODE 自动白平衡模式<li>CONTROL_AE_MODE 自动曝光模式<li>FLASH_MODE 闪光灯模式<li>JPEG_ORIENTATION jpeg图像方向<li>NOISE_REDUCTION_MODE 降噪模式</ul></blockquote></ul><h3 id="b-camera2-manifest常用权限"><strong>B. Camera2 Manifest常用权限</strong></h3><h4 id="1-uses-permission-androidname-androidmaxsdkversion">1. &lt;uses-permission android:name=”” android:maxSdkVersion=”“&gt;</h4><blockquote><p><strong>&lt;uses-permission&gt;是为了某项操作正常运行必须给予的权限，在Manifest.xml中定义</strong><br /> <strong>Docs:Requests a permission that the application must be granted in order for it to operate correctly.</strong></p></blockquote><ul><li> <font color="Blue">android.permission.CAMERA</font><blockquote> <font color="Tan">相机的使用权限</font></blockquote><li> <font color="Blue">android.permission.WRITE_EXTERNAL_STORAGE</font><blockquote> <font color="Tan">写入存储权限, API19后有变化如下</font><p><strong>Docs: Starting in API level 19, this permission is not required to read/write files in your application-specific directories returned by Context.getExternalFilesDir(String) and Context.getExternalCacheDir().</strong></p></blockquote><li> <font color="Blue">android.permission.READ_EXTERNAL_STORAGE</font><blockquote> <font color="Tan">读取存储权限, API19后有变化如下</font><p><strong>Docs: Starting in API level 19, this permission is not required to read/write files in your application-specific directories returned by Context.getExternalFilesDir(String) and Context.getExternalCacheDir().</strong></p></blockquote><li> <font color="Blue">android.permission.RECORD_AUDIO</font><blockquote> <font color="Tan">录音权限</font><p><strong>Docs: Allows an application to record audio.</strong></p></blockquote><li> <font color="Blue">android.permission.BLUETOOTH</font><blockquote> <font color="Tan">蓝牙权限</font><p><strong>Docs: Allows applications to connect to paired bluetooth devices.</strong></p></blockquote><li> <font color="Blue">android.permission.BROADCAST_SMS</font><blockquote> <font color="Tan">短信提醒权限</font><p><strong>Docs: Allows an application to broadcast an SMS receipt notification.</strong></p></blockquote><li> <font color="Blue">android.permission.BROADCAST_STICKY</font><blockquote> <font color="Tan">快速发出第二个提醒权限</font><p><strong>Docs: Allows an application to broadcast sticky intents.</strong></p></blockquote><li> <font color="Blue">android.permission.INTERNET</font><blockquote> <font color="Tan">联网权限</font><p><strong>Docs: Allows applications to open network sockets.</strong></p></blockquote><li> <font color="Blue">android.permission.BLUETOOTH</font><blockquote> <font color="Tan">蓝牙权限</font><p><strong>Docs: Allows applications to connect to paired bluetooth devices.</strong></p></blockquote></ul><h4 id="2-permission-androiddescription-androidicon-androidlabel-androidname-androidpermissiongroup-androidprotectionlevel">2. &lt;permission android:description=”” android:icon=”” android:label=”” android:name=”” android:permissionGroup=”” android:protectionLevel=”“&gt;</h4><blockquote><p><strong>&lt;permission&gt;是声明某个权限，也在Manifest.xml中定义，其他同上。与uses-permission区别见Docs</strong><br /> <strong>Docs: Declares a security permission that can be used to limit access to specific components or features of this or other applications.</strong><br /> <strong>Diff(From StackOverflow):</strong> &lt;permission&gt; is normally used when making a custom permission (e.g. when making an app that other apps can tie in to, limiting access is a must), and &lt;uses-permission&gt; is used when your app actually needs a permission it doesn’t have normally.</p></blockquote><h3 id="c-android-camera2中常用widget"><strong>C. Android Camera2中常用widget</strong></h3></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/android/'>Android</a>, <a href='/categories/java/'>Java</a>, <a href='/categories/basic/'>Basic</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >Android</a> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a> <a href="/tags/fundamental/" class="post-tag no-text-decoration" >Fundamental</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Android Camera2 Fundamentals - Jinbo&url=https://JinboYang94.github.io/posts/Android-Camera2-Basics/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Android Camera2 Fundamentals - Jinbo&u=https://JinboYang94.github.io/posts/Android-Camera2-Basics/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Android Camera2 Fundamentals - Jinbo&url=https://JinboYang94.github.io/posts/Android-Camera2-Basics/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Android-Camera2-Basics/">Android Camera2 Fundamentals</a><li><a href="/posts/Java-Fundamentals/">Java Fundamentals</a><li><a href="/posts/Threads-And-Concurrent/">Threads and Concurrent</a><li><a href="/posts/Python-Fundamentals/">Python Fundamentals</a><li><a href="/posts/Computer-Networks-QA/">Computer Networks Fundamentals</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/fundamental/">Fundamental</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/networks/">Networks</a> <a class="post-tag" href="/tags/python/">Python</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Java-Fundamentals/"><div class="card-body"> <span class="timeago small" > Nov 12, 2020 <i class="unloaded">2020-11-12T14:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java Fundamentals</h3><div class="text-muted small"><p> Java知识点总结+复习(长期更新) JavaSE部分 A. 基础知识 1. 面向过程和面向对象的区别 面向过程(Progress oriented) 优点：性能更高，因为调用类需要实例化，更消耗资源。单片机、嵌入式、Linux/Unix开发常用，因为性能是最重要的 缺点：没有面向对象易维护、易复用、易扩展 面向对象(Object oriented) 优点：易维护、易复用、易...</p></div></div></a></div><div class="card"> <a href="/posts/Threads-And-Concurrent/"><div class="card-body"> <span class="timeago small" > Dec 2, 2020 <i class="unloaded">2020-12-02T14:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Threads and Concurrent</h3><div class="text-muted small"><p> 并发和线程(看心情更新) A. 基础知识 1. 线程(thread)和进程(process) 线程是操作系统能够进行运算调度的最小单位，大部分情况下，它被包含在进程之中，是进程中的实际运作单位 进程是指计算机中已运行的程序 多进程vs多线程：本质区别在多线程共享数据，多进程每个进程拥有自己的一整套变量 2. 创建新线程常见方法 Method1: 定义Threa...</p></div></div></a></div><div class="card"> <a href="/posts/Computer-Networks-QA/"><div class="card-body"> <span class="timeago small" > Nov 28, 2020 <i class="unloaded">2020-11-28T11:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Computer Networks Fundamentals</h3><div class="text-muted small"><p> Computer Networks知识点总结(长期更新) A. 基本内容 1. 体系结构 TCP/IP 五层结构 应用层(Application Layer) -is where network applications and their application-layer protocols reside -主要通过应用进程间的通信交互来完成网络应...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Python-Fundamentals/" class="btn btn-outline-primary"><p>Python Fundamentals</p></a> <span class="btn btn-outline-primary disabled"><p>-</p></span></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//jinboyang-cc.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://JinboYang94.github.io/posts/Android-Camera2-Basics/'; this.page.identifier = '/posts/Android-Camera2-Basics/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/username">Jinbo Yang</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/fundamental/">Fundamental</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/networks/">Networks</a> <a class="post-tag" href="/tags/python/">Python</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://JinboYang94.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-178261471-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-178261471-1'); </script>
